## 16장. 오케스트레이션 기반 서비스 지향 아키텍처 스타일

서비스 기반 아키텍처는 분산 아키텍처였다
거기에 오케스트레이션 해주는 레이어가 추가로 생긴 것

![image](assets/image25.png){width="800" height="300"}

중심 철학은 '엔터프라이즈 레벨의 재사용'

택소노미(Taxonomy): '분류체계'라는 뜻. 그리스어로 분류하다(taxis)와 법, 과학(nomos)이란 단어가 합쳐져 탄생

토폴로지
* 비즈니스 서비스
    * 진입점
    * 코드는 없고, 입력, 출력, 스키마 정보만 가지고 있다
* 엔터프라이즈 서비스
    * 세분화된 공유 구현체
    * 특정 비즈니스 도메인(유저 생성, 재고 계산) 같은 원자적 행위를 구현한다. 이러한 행위들은 오케스트레이션 엔진을 통해 묶이고, 더 큰 단위의 비즈니스 서비스를 구성하는 요소가 된다
    * 왜? '재사용'을 잘하기 위해서 이렇게 엔터프라이즈 서비스라는 개념으로 코드들을 묶은 것이다
        * 현실 세상에서는 잘 통하지 않았다
* 애플리케이션 서비스
    * 모든 서비스들이 동일한 레벨의 세분화 또는 재사용이 필요한 것은 아니다. 1번만 사용할꺼라면 애플리케이션 서비스에 개발할 수 있다
    * ex. 지리 공간 정보 조회, 이런 로직을 재사용 가능한 서비스로 구현하고 싶지 않을때
* 인프라 서비스
    * 모니터링, 로킹, 인증/인가
* 오케스트레이션 엔진
    * 비즈니스 서비스 구현체를 서로 엮어서, 트랜잭션 조정, 메시지 변환 등의 기능을 수행
    * 비즈니스 <-> 엔터프라이즈 서비스 관계, 이 둘을 매핑하는 방법, 트랜잭션의 경계 등을 정의
    * 콘웨이의 법칙에 따르면...이 엔진을 담당하는 팀은 계속해서 커지고 책임이 많아지고 결국 병목이 될 것이다
    * 모든 요청은 오케스트레이션 엔진으로 흘러감. 심지어 내부 호출에서도

### 16.4 재사용 그리고 커플링

이 아키텍처의 주된 목표는 서비스 레벨의 재사용이다
보험회사를 예로 들면 고객과 관련된 여러 기능들이 있다
* 자동차 및 주택소유자 보험팀
* 생명 보험팀
* 상업신용 보험팀
* 장애 보험팀
* 상해보장 보험팀
* 여행 보험팀

여기에는 모두 '고객'이라는 개념이 포함되어있는데,
이걸 엔터프라이즈 서비스로 모두 통합한것이다 (재사용을 위해서!)

재사용은 되겠지만, 모든 팀들과 커플링되어버렸다 (마치 big ball of mud가 되었다)
하나가 수정되면 모두 수정되어야한다

![image](assets/image26.png){width="800" height="600"}
