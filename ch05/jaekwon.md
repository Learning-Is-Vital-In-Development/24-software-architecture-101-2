## 5장. 아키텍처 특성 식별

> https://nealford.com/katas/
> https://github.com/tekiegirl/SoftwareArchitectureResources/blob/main/Resources/OReillyKata.md
> https://www.youtube.com/watch?v=2GIYtcxXDqY&t=1s


아키텍처를 구축하거나, 기존 아키텍처의 타당성을 검증할 때, 가장 먼저 해야할 것은 아키텍처 특성을 '식별'하는 것

* 도메인 관심사
* 요구사항
* 암묵적 도메인 지식
  을 통해서 시스템이 필요로하는 아티텍처 특성을 도출 해내야한다

### 5.1 도메인 관심사

도메인 관점에서 무엇이 중요한지 의견을 나누고, 결정해야한다

예시
* 인수 합병 -> 상호운용성,확장성,적응성,신장성
* 출시 시기 -> 민첩성,시험성,배포성
* 유저 만족 -> 성능,가용성,내고장성,시험성,배포성,민첩성,보안
* 경쟁 우위 -> 민첩성,시험성,배포성,확장성,가용성,내고장성
* 시간 및 예산 -> 단순성,실행성

'당일 펀드 종가는 무슨 일이 있어도 제시간에 마감돼야 한다'는 요구사항이 제시되었다면?

* 필요한 시점에 시스템을 사용할 수 없다면, 성능은 의미 없다
* 도메인이 커지고, 펀드가 더 유입되더라도 제시간에 종가 계산이 완료될 수 있어야 한다
* 가용성과 안정성이 보장되어야 한다
* 종가 계산 85% 정도에서 시스템이 다운되었다면? 복구할 수 있어야 한다
* 빠르기도 해야겠지만, 종가 계산은 정확해야한다

### 5.2 요구사항에서 아키텍처 특성 도출

총 학생수는 1000명, 학생 1인당 10시간의 수강 신청을 해야한다면?

시스템 이용 시간이 고루 분포되리라 가정하고 설계?
혹은 마지막에 몰릴 것을 가정하고 설계?

이런 시시콜콜한 내용까지 요구사항 정의서에 있지 않다! 하지만 이런 것까지 설계 결정에 반영해야한다

### 5.3 사례 연구: 실리콘 샌드위치

아키텍처 kata

* 설명
    * 실리콘 샌드위치는 전국 가맹점을 보유한 샌드위치 브랜드
    * 현재의 매장 서비스와 병행하여 온라인 주문 시스템을 구축하려고 한다
* 유저
    * 수천명 ~ 수백만명
* 요구사항
    * 유저가 주문을 하면 샌드위치를 픽업하러 갈 시간 및 상점까지 가는 경로를 전달받는다
    * 배달 서비스가 가능한 지점은 기사를 보내 샌드위치를 유저에게 배달한다
    * 모바일 기기에서도 이용 가능하다
    * 전국 어느 지점이나 이용 가능한 프로모션/스페셜 행사를 제공한다
    * 특정 지점에서만 이용 가능한 로컬 프로모션/스페셜 행사를 제공한다
    * 온라인 결제, 대면 결제, 배송 시 결제 등 다양한 결제 옵션을 제공한다
* 부가 콘텍스트
    * 샌드위치 지점은 가맹점이므로 소유자가 다 다르다
    * 곧 해외 진출 예정
    * 이 회사는 값싼 인력을 고용해 이윤을 최대화하는 것이 목표

이런 시나리오를 받아서 아키텍처 특성을 도출해야한다

각 요구사항들은 아키텍처 특성과 연관이 있을 수도 있고, 없을 수도 있고, 명시적일 수도 있고, 암묵적일 수도 있다
도메인을 잘 알고 있다면 도움이 됩니다

#### 명시적 특성

* 유저 수
    * 순차적으로 늘어나는 확장성 vs 폭발적으로 증가,감소하는 탄력성
    * 샌드위치 주문은 점심 시간에 몰린다
    * 호텔 예약 시스템이라면?

* 유저가 주문을 하면 샌드위치를 픽업하러 갈 시간 및 상점까지 가는 경로를 전달받는다
    * 지도 서비스가 반드시 필요하다고 명시되어 있지만, 외부 지도 서비스가 장애라고 해서 주문 서비스까지 장애일 필요는 없다. 과도하게 아키텍처 특성을 설정하지 않도록 유의
* 배달 서비스가 가능한 지점은 기사를 보내 샌드위치를 유저에게 배달한다
    * 그냥 하면 될 듯
* 모바일 기기에서도 이용 가능하다
    * 예산은 한정되어 있는데, 어디까지 지원할 것이냐? 웹? 앱? 둘다?
    * 비디오 스트리밍 서비스라면..웹, 앱, TV, 아이패드 등등 다양할듯
* 전국 어느 지점이나 이용 가능한 프로모션/스페셜 행사를 제공한다
* 특정 지점에서만 이용 가능한 로컬 프로모션/스페셜 행사를 제공한다
    * 커스터마이징 지원 방식
        * 마이크로 커널 + plugin 방식 vs 기존 설계 패턴 이용
* 온라인 결제, 대면 결제, 배송 시 결제 등 다양한 결제 옵션을 제공한다
    * 보안
* 샌드위치 지점은 가맹점이므로 소유자가 다 다르다
* 곧 해외 진출 예정
    * 국제화. i18n
* 이 회사는 값싼 인력을 고용해 이윤을 최대화하는 것이 목표

#### 암묵적 특성

* 신뢰성
    * 유저는 항상, 언제든지 사이트에 로그인 할 수 있어야 한다
* 보안
    * 결제는 서드파트를 쓸테니..기본적인 보안만 개발자가 지키면 될 듯? ex. 신용카드 번호를 평문으로 전송하지 않는다

아키텍처에서는 틀린 답은 없고 값비싼 답만 있습니다

설계 대 아키텍처, 그리고 트레이드 오프

> 설계와 아키텍처는 어떤 의미로 구분한걸까?

아키텍트는 아키텍처 특성에 우선순위를 매겨 가장 단순한 필수 세트를 정리해야 합니다.
