# CHAPTER 7

# Overview

아키텍트가 성능이 좋고 탄력적인 코드베이스를 설계하려고 아무리 노력해도 시스템이 그런 특성에 부합하지 않는 데이터베이스를 사용하면 애플리케이션이 성공할 리 없다.

아키텍트는 운영 아키텍처 특성을 따져보고 아키텍처 특성에 영향을 미치는 코드베이스 외부의 컴포넌트를 잘 살펴봐야 한다. 이런 종류의 의존성을 측정하기 위해 아키텍처 퀀텀이라는 용어를 정의 하였으며, 퀀텀의 의미를 이해하려면 커네이선스라는 핵심 메트릭을 알아두어야 한다.

## 커네이선스

두 컴포넌트 중 한쪽이 변경될 경우 다른 쪽도 변경해야 전체 시스템의 정합성이 맞는다면 이 둘은 커네이선스를 갖고 있는 것이다.

아키텍처 퀀텀을 정의하려면 컴포넌트가 어떻게 서로 연결되어 있는지 측정할 방법이 필요하며, 정적 커네이선스와, 런타임 동작에 관한 동적 커네이선스가 있다.

두 서비스가 Address 라는 동일한 클래스를 공유한다면, 두 서비스는 서로 `정적인 커네이선스`를 가진다고 볼 수 있다. 다시 말해, Address 클래스를 변경하면 두 서비스 모두 변경해야 한다.

`동적 커네이선스` 는 동기, 비동기 두 종류가 있으며, 분산 서비스 끼리 동기 호출을 하면 호출부는 피호출부의 응답을 기다려야 하는 반면, 이벤트 기반 아키텍처의 비동기 호출은 `파이어 앤드 포켓` 방식으로 두 서비스는 개별적으로 작동시킬 수 있다.

## 아키텍처 퀀텀과 세분도

소프트웨어를 서로 엮는 것은 컴포넌트 레벨의 커플링 만이 아니다. 많은 비즈니스 개념이 의미상 여러 시스템 파트를 한데 엮어 기능적으로 응집되어 있다. 성공적으로 소프트웨어를 설계, 분석, 발전 시키기 위해 개발자는 문제가 될 만한 커플링 지점을 모두 살펴봐야 한다.

### 아키텍처 퀀텀

높은 기능 응집도와 동기적 커네이선스를 가진, 독립적으로 배포 가능한 아티팩트

### 독립적으로 배포 가능

다른 파트와 독립적으로 작동되는 모든 필수 컴포넌트를 포함한다. 예를 들어 단일 데이터베이스를 사용하여 배포된 거의 모든 레거시 시스템은 아키텍처 퀀텀이 1이지만, 마이크로서비스 아키텍처의 경우 서비스마다 데이터베이스가 따로 있으니 퀀텀이 여러 개 이다.

### 높은 기능 응집도.

응집도는 컴포넌트 설계에 따라 구현된 코드가 얼마나 목적에 맞게 통합되어 있는지를 나타낸다.

기능 응집도가 높다는 건 아키텍처 퀀텀이 목적에 맞게 뭔가를 하고 있다는 뜻이다.

### 동기적 커네이선스

동기적 커네이선스는 아키텍처 퀀텀을 형성하는 애플리케이션 콘텍스트 내부 또는 분산 서비스 간의 동기 호출을 의미한다.

동기 호출은 호출의 길이에 대해 동적 커네이선스를 만들어낸다. 즉, 한쪽이 다른 쪽을 기다린다면 호출하는 도중에는 양쪽의 운영 아키텍처 특성이 동일해야 한다.
