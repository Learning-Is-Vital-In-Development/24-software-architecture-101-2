# ch08. 컴포넌트 기반 사고

----

## 8.1 컴포넌트 범위
컴포넌트는 아티팩트를 한데 묶어 필요시 중첩시켜 계층화하는, 배포 가능한 작업 단위이다.

## 8.2 아키텍트 역할
### 8.2.1 아키텍처 분할

소프트웨어는 만사가 다 트레이오프인 것처럼, 컴포넌드를 만드는 방법도 마찬가지이다. 재량껏 분할하여 컴포넌트를 만든다.

- 레이어드 아키텍처 : 기술적 능력으로 분할 
- 모듈러 모놀리스 : 기술적인 능력이 아닌 도메인에 따라 분할된 단일 배포 단위.

컴포넌트 도출 시 아키텍트는 기본적으로 최상위 분할을 어떻게 할지 결정해야 한다.

## 8.4 컴포넌트 식별 흐름
컴포넌트 식별은 후보를 도출하고 피드백을 통해 다듬어가는 과정을 반복하는 것이 가장 좋다.
1. 초기 컴포넌트 식별 : 소스 코드가 생기기 전 최상위 컴포넌트를 어디서부터 시작할지 결정
2. 요구사항을 컴포넌트에 할당 : 컴포넌트에 요구사항을 대입해 잘 맞는지 확인. 이 과정에서 새로운 컴포넌트를 만들거나 분해
3. 역할 및 책임 분석 : 컴포넌트의 역할과 책임을 살펴보고 잘 나뉘었는지 확인
4. 아키텍처 특성 분석 : 아키텍처의 특성이 컴포넌트 분할 및 세분도에 어떤 영향을 살피는지 살펴봐야 함.
5. 컴포넌트 재구성 : 리뷰를 바탕으로 컴포넌트 설계의 반복

## 8.5 컴포넌트 세분도
컴포넌트를 너무 잘게 나누어 설계하면 컴포넌트 간 통신이 너무 많아지고, 너무 크게 나누면 내부적으로 커플링이 증가해서
배포, 테스트가 어려워지고  모듈성 관점에서도 부정적인 영향을 미친다.

## 8.6 컴포넌트 설계
 컴포넌트를 발견하는 법과 하지 말아야 할 사항에 대해 알아보자.
### 엔티티 함정
엔티티를 바탕으로 컴포넌트를 만드는 것은 아키텍처가 아닐 수 있다. 그저 데이터베이스에 컴포넌트 관계형으로 매핑한 것에 불과하다.
다시 말해, 단순 CRUD 기능만  필요한 시스템은 아키텍트가 프레임워크를 내려 받아 디비에서 직접 유저 인터페이스를 생성할 수 있다.
디비 관계를 애플리케이션의 워크플로로 오해하면 안된다.
### 액터/액션 접근법
애플리케이션에서 일을 하는 액터와 그들이 수행하는 액션을 식별하고 시스템의 대표적인 유저와 이들이 시스템에서
어떤 종류의 일을 하는지 찾아내는 기법이다.
### 이벤트 스토밍
DDD에서 사용되는 컴포넌트 발견 기법이다. 컴포넌트가 메시지나 이벤트를 이용해 서로 통신한다고 가정하고,
이벤트와 메시지 핸들러 중심으로 컴포넌트를 구성한다. MSA 서비스에서 주효하다.
### 워크플로 접근법
이벤트 스토밍과 비슷하지만 메시지 같은 제약조건이 없다.핵심 역할을 식별하고 이 역할이 관여하는 워크플로 유형에 따라 컴포넌트를 구축한다. 